const serverURL="https://themealdb.com",apiSegment="/api/json/",apiBaseKey="v1/1/",apiPayedKey="v2/9973533/",search_URL=`${serverURL}/api/json/v2/9973533/`,apiSelected=[{url:"random.php",tipo:"meals",layout:"recipeArea",sesion:!1,name:"0. Receta Sorpresa"},{url:"randomselection.php",tipo:"meals",layout:"rnd10Recipes",sesion:!0,nombre:"1. 1-10 random recipes"},{url:"categories.php",tipo:"categories",layout:"listCategories",sesion:!0,nombre:"2. Categorías"},{url:"latest.php",tipo:"meals",layout:"latestRecipe",sesion:!0,nombre:"3. Latest 10"},{url:"list.php?a=list",tipo:"meals",layout:"listAllAreas",sesion:!0,nombre:"4. Áreas"},{url:"list.php?c=list",tipo:"meals",layout:"listAllCategories",sesion:!0,nombre:"5. Categorías"},{url:"list.php?i=list",tipo:"meals",layout:"listAllIngredients",sesion:!0,nombre:"6. Ingredientes"},{url:"filter.php?a=",tipo:"meals",layout:"results",sesion:!1,nombre:"7. Búsqueda por área"},{url:"filter.php?c=",tipo:"meals",layout:"results",sesion:!1,nombre:"8. Búsqueda por categoría"},{url:"filter.php?i=",tipo:"meals",layout:"ingredientsResults",sesion:!1,name:"9. Búsqueda por ingrediente 1"},{url:"filter.php?i=",tipo:"meals",layout:"ingredientsResults",sesion:!1,nombre:"10. Búsqueda multingredientes"},{url:"lookup.php?i=",tipo:"meals",layout:"recipeArea",sesion:!1,name:"11. Búsqueda por Id"},{url:"search.php?f=",tipo:"meals",layout:"alfabetico",sesion:!1,nombre:"12. Búsqueda por primera letra"},{url:"search.php?s=",tipo:"meals",layout:"results",sesion:!1,nombre:"13. Búsqueda por palabra o letras en receta"},{url:"random.php",tipo:"meals",layout:"recipeDay",sesion:!0,nombre:"14. Receta del día"}];function randomRecipeHTML(e,t){console.log("Formateando String en randomRecipeHTML:",t);const n=document.getElementById(e);n.innerHTML="",t.forEach((t=>{n.innerHTML+=`<article id="${t.idMeal}"\n        class="card-Recipie-Day | display-flex flex-gap overflow-hidden position-relative border-radius-10px padding-300-vertical padding-600-inline margin-500">\n        <div class="redBar"></div>\n        <button class="imgContainer | border-radius-12px" onclick="getRecipe(${t.idMeal})">                \n          <img src="${t.strMealThumb}" alt="Picture of ${t.strMeal}">\n         </button>\n        <div class="display-flex flex-column-reverse    justify-content-around flex-center">\n          <h3 class=" card-Recipie-Day-Text | font-family-Popp\n            font-style-normal font-weight-500 font-size-28\n            font-line-height-42 text-center">\n            ${t.strMeal}\n          </h3>\n          <button\n            class="bg-primary-tomatogreen text-neutral-lightpink border-radius-45px button-primary text-capitalize font-family-Popp font-weight-600 font-size-16" onclick="getRecipe(${t.idMeal})">\n            Recipie of the day\n          </button>\n        </div>\n      </article>`,console.log("Termina randomHTML en idLayout:",e)}))}function recipesHTML(e,t){console.log("DENTRO de recipesHTML:id=",e," : ",t);const n=`We found ${t.length} related recipies.`;console.log(n),"ingredientsResults"===e?document.getElementById("RelatedByIngredient").textContent=`We got ${t.length} related dishes`:"latestRecipe"===e||(document.getElementById("numberResults").textContent=`We found ${t.length} results for your search`);const i=document.getElementById(e);i.innerHTML="",t.forEach((t=>{i.innerHTML+=`<article id="${t.idMeal}"\n            class="recipieCard | display-flex flex-column flex-gap padding-300 flex-align-center overflow-hidden position-relative text-center">\n            <button class="overflow-hidden border-radius-10px   "onclick="getRecipe(${t.idMeal})">\n                <img class="imgCard" src="${t.strMealThumb}">\n            </button>\n            <h4>${t.strMeal}</h4>\n            <button\n                class="card-Btn | bg-primary-tomatogreen width-100 padding-200 position-absolute text-decoration-none .font-family-Popp  font-size-24 text-neutral-lightpink text-center" onclick="getRecipe(${t.idMeal})">\n                View recipie \n            </button>\n        </article>`,console.log("Termina recipesHTML en IdLayout:",e)}))}function printIngredient(e){let t="";return[...Array(21).keys()].forEach((function(n,i){`strIngredient${i}`in e&&(t+=`\x3c!--ESTE ERA UN ANCHOR y lo CAMBIE POR UN DIV o Button\n            //  <a href="ingredient.html"--\x3e\n                <div class="text-none text-neutral-matteblack">\n                    <figure>\n                        <img src="${serverURL}/images/ingredients/${e["strIngredient"+i]}.png" alt="${e["strIngredient"+i]}" style="width: 81px; height:81px; object-fit: cover" onclick="getFilteredList(9,'${e["strIngredient"+i]}')">\n                        <p>${i} ${e["strMeasure"+i]}&nbsp;${e["strIngredient"+i]}</p>\n                    </figure>\n                </div>`)})),console.log("Termina printIngredient"),t}function recipesXLHTML(e,t){console.log("Dentro de la funcion una XLHTMLrecipe:",t);const n=document.getElementById(e);n.innerHTML="",t.forEach((t=>{n.innerHTML=`<section style="margin: 40px;" id="recipe">\n    <div id="${t.idMeal}">\n    \x3c!-- ==========================RECIPE TITLE id AREA =============================================start --\x3e\n    <h1 class="text-primary-tomatogreen font-family-Vida\n\n    font-style-normal font-weight-400 font-size-64\n    font-line-height-78 display-flex justify-content-center text-center" id="recipeTitle">${t.strMeal}</h1>\n    \x3c!-- ==========================RECIPE TITLE id AREA ================================================eND --\x3e\n    </div>\n\n    \x3c!-- Etiquetas suspendidas --\x3e\n    \x3c!--EVALUANDO NO USARLAS TEMPORALMENTE--\x3e\n    \x3c!-- <div class="container display-flex flex-row flex-gap justify-content-center">\n    <button\n    class="button-primary-outline border-color-primary-tomatored text-primary-tomatored border-radius-45px">\n    Casserole</button>\n\n    <button\n    class="button-primary-outline border-color-primary-tomatored text-primary-tomatored border-radius-45px">\n    Cheasy</button>  \n    \n    <button\n    class="button-primary-outline border-color-primary-tomatored text-primary-tomatored border-radius-45px">\n    Meat</button>      \n        </div> --\x3e\n\n    </section>\n    \x3c!-- Recipe ingredients and recipe image --\x3e\n    <section class="display-flex flex-column-reverse flex-gap justify-content-center recipe-ingredients">\n    <aside class="text-center">\n    <h3 class="text-primary-tomatored font-family-Popp\n        font-style-normal font-weight-500 font-size-28\n        font-line-height-42" style="margin: 20px">Recipe ingredients</h3>\n        \x3c!--ESTA SECCION DE LA IMAGEN NO IB A AQUI INICIALMENTE. \n        lA CAMBIE PORQUE NO RESPONDIA AL css Y CARGABA LA IMAGEN A LA IZQ--\x3e\n            \x3c!-- Recipe image --\x3e\n        <article>\n            <img src="${t.strMealThumb}" alt="Foto of ${t.strMeal}" class="recipe-image">\n        </article>\n        <br>\x3c!--ESTE BR fRANK LO INSERTO, PORQUE NO HABIA ESPACION ENTRE FOTO E INGREDIENTES--\x3e\n        \x3c!--HASTA AQUI NO ESTABA AQUI DE LA IMAGEN DE LA RECETA  --\x3e\n    <section class="text-center text-neutral-matteblack  font-family-Popp\n    font-style-normal font-weight-275 font-size-20 font-line-height-30" \n    style="display: grid; grid-template-columns: repeat(4, auto); \n    grid-template-rows: repeat(2, auto); column-gap: 16.3px; \n    row-gap: 1px; justify-items: center;" id="recipeIngredients">\n        \x3c!-- ==========================RECIPE INGREDIENTS id AREA ===================================== --\x3e\n        `+printIngredient(t)+`</section>\n\n</aside>\n\x3c!--Aqui iba el tag Article con la imegen, pero no respondia a las etiquetas y estaba cargado a la izQ--\x3e\n</section>\n\x3c!-- Recipe instructions --\x3e\n<section class="display-flex flex-column align-items-center" style="width: 55%; margin: 20px auto">\n<h3 class="text-primary-tomatored font-family-Popp font-style-normal font-weight-600 font-size-32\nfont-line-height-48 text-center">Recipe instructions</h3>\n<ol class="text-neutral-matteblack  font-family-Popp\nfont-style-normal font-weight-400 font-size-16\nfont-line-height-24">\n  ${t.strInstructions}\n</ol>\n</section>\n\x3c!-- Share --\x3e\n<section class="display-flex flex-column text-center" style="width: 40%; margin: 20px auto">\n<span class="text-primary-tomatored font-family-Popp\nfont-style-normal font-weight-600 font-size-40\nfont-line-height-60">Did you make it?</span>\n<span class="text-primary-tomatogreen font-family-Popp\nfont-style-normal font-weight-300 font-size-24\nfont-line-height-36">We would love for you to share it with us! #Recipini</span>\n</section>\n\x3c!-- Video --\x3e\n\x3c!--YOUTUBE FORZA A VERLO DESDE SU SITIO\n\x3c!--<section class="display-flex flex-column align-items-center video">\n<h3 class="text-primary-tomatored font-family-Popp\nfont-style-normal font-weight-500 font-size-28\nfont-line-height-42" style="margin: 20px">Video of how it was made!</h3>\n<iframe width="685" height="415" src=${t.strYoutube} title="YouTube video player"\n  frameborder="0"\n  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"\n  allowfullscreen></iframe>--\x3e\n</section>`,console.log("Termina recipesXLHTML en IdLayout:",e)}))}function listsAllCategoriesHTML(e,t){console.log("Enla funcion lists:",t);const n=document.getElementById(e);n.innerHTML="",t.forEach((e=>{const t=document.createElement("div");t.innerHTML=`\n            <div class="card">\n                <div class="cardContainer" id="${e.strCategory}">\n                    <div class="cardImgContainer">\n                        <p>\n                            <strong>${e.strCategory} </strong>\n                        </p>\n                        <button class="linkCard" onclick="getFilteredList(8,'${e.strCategory}')">\n                            <img class="imgCard" \n                            src="${serverURL}/images/category/${e.strCategory}.png" alt="${e.strCategory}">\n                        </button>\n            </div>`,n.appendChild(t)})),printTotal("results",t.length)}function listsAllAreaHTML(e,t){console.log("En listAllAreaHTML String Formatting",t);const n=document.getElementById(e);n.innerHTML="",t.forEach((e=>{"Unknown"!=e.strArea&&(n.innerHTML+=`<article id="${e.strArea}" class="area-catagory ">\n                    \x3c!--ESTE ERA UN ANCHOR y lo CAMBIE POR UN DIV\n                    //       <a href="search_results.html"--\x3e\n                    <div class=" display-flex flex-column flex-gap margin-100">\n                        <div class="flag-Container | overflow-hidden">\n                            <img \n                            src="/src/assets/Flags/${e.strArea}.png" \n                            alt="The ${e.strArea} Flag" onclick="getFilteredList(7,'${e.strArea}')">\n                        </div>\n                        <button class="flag-Btn | button-primary-outline border-color-primary-tomatored  border-radius-45px font-family-Popp\n                            font-style-normal font-weight-600 font-size-20\n                            fit-content-width text-center padding-300-inline text-primary-tomatored"\n                            style="border: 2px solid ;" onclick="getFilteredList(7,'${e.strArea}')">\n                            ${e.strArea}\n                        </button>\n                    </div>\n                </article>`)})),console.log("Ending listAllAreas/CountryFlags in IdLayout:",e)}function listsAllIngredientsHTML(e,t){console.log("Enla funcion lists:",t);const n=document.getElementById(e);n.innerHTML="",t.forEach((e=>{const t=document.createElement("div");t.innerHTML=`\n        <div class="card">\n            <div class="cardContainer" id="${e.idIngredient}">\n                <div class="cardImgContainer">\n                data.meals:\n                    <p>\n                        <strong>${e.strIngredient}</strong>\n                    </p>\n                    <button class="linkCard" onclick="getFilteredList(9,'${e.strIngredient}')">\n                        <img class="imgCard" src="${serverURL}/images/ingredients/${e.strIngredient}.png" alt="${e.strIngredient}">\n                    </button>\n                    </div>\n            </div>\n            <div class="cardTextContainer">${e.strDescription}</div>\n        </div>`,n.appendChild(t)}))}async function getFilteredList(e,t){getGeneral(e,t)}async function getRecipe(e){getGeneral(11,e)}async function getAPIResponse(e,t=""){try{let n=t?`${search_URL}${apiSelected[e].url}${t}`:`${search_URL}${apiSelected[e].url}`;console.log("URL a llamar",n),console.log("Nombre de Búsqueda: ",apiSelected[e].nombre);const i=await fetch(n),s=await i.json();return s.meals&&(console.log("apiIndex:",e),s.meals.map((function(e){[...Array(21).keys()].forEach((function(t,n){!(`strIngredient${n}`in e)||""!=e[`strIngredient${n}`]&&null!=e[`strIngredient${n}`]||(delete e[`strIngredient${n}`],delete e[`strMeasure${n}`])})),"strInstructions"in e&&(e.strInstructions="<ul><li>"+e.strInstructions.split("\r\n").join("</li><li>")+"</li></ul>")})),console.log("filterOBJ from API",":",s.meals)),s}catch(e){console.log(e)}}function printTotal(e,t){document.getElementById(e).innerHTML=`${t} resultados`}async function getGeneral(e,t=""){const n=await getAPIResponse(e,t);layout=apiSelected[e].layout;let i=n[apiSelected[e].tipo];switch(!0===apiSelected[e].sesion&&(sessionStorage.getItem(apiSelected[e].layout)?(i=JSON.parse(sessionStorage.getItem(apiSelected[e].layout))[apiSelected[e].tipo],console.log("en sesion")):sessionStorage.setItem(layout,JSON.stringify(n))),e){case 1:case 3:case 7:case 8:case 9:recipesHTML(layout,i);break;case 2:categoriesHTML(layout,i);break;case 4:listsAllAreaHTML(layout,i);break;case 5:listsAllCategoriesHTML(layout,i);break;case 6:listsAllIngredientsHTML(layout,i);break;case 11:recipesXLHTML(layout,i);break;case 14:randomRecipeHTML(layout,i)}}function changeVisibility(e){document.querySelectorAll(".displayAreas").forEach((function(t){e.includes(t.id)?t.style.display="block":t.style.display="none"}))}function invisiblesearchBox(){document.getElementById("SearchBar1").style.display="none"}function visiblesearchBox(){document.getElementById("SearchBar1").style.display="block"}window.onload=async function(){try{await Promise.all([getGeneral(3),getGeneral(4),getGeneral(14)])}catch(e){console.error("Promise.all Error on window.onload",e)}},document.getElementById("randomButton").onclick=async function(){const e=await getAPIResponse(0);recipesXLHTML("recipeArea",e.meals),sessionStorage.setItem("randomRecipe",JSON.stringify(e))},document.getElementById("searchBar2").oninput=async function(){const e=document.getElementById("searchBar2");if(console.log("searchterm.length",e.value.length),e.value.length>2){const t=await getAPIResponse(13,e.value);let n=t.meals;sessionStorage.setItem("searchterm",e.value),console.log("searchterm",sessionStorage.getItem("searchterm")),console.log("resultterm",sessionStorage.getItem("resultterm")),sessionStorage.setItem("resultterm",JSON.stringify(t)),"meals"in t&&t.meals?(console.log("Buscando receta(",e.value,"): ",t),console.log("Receta x Terminos: ",e.value,":#(",t.meals.length,"):\n",t.meals),recipesHTML("results",n)):document.getElementById("results").innerHTML="<h3>No existen resultados con esos parámetros de búsqueda.</h3>"}else sessionStorage.setItem("searchterm",""),sessionStorage.setItem("resultterm","")},document.addEventListener("keypress",(function(e){if(13===e.keyCode||13===e.which)return e.preventDefault(),document.getElementById("searchInputBar2").value="",document.getElementById("results").innerHTML="",sessionStorage.setItem("searchterm",""),sessionStorage.setItem("resultterm",""),!1}));const preloader=document.querySelector(".preloader-wrapper");function activeSection(e){preloader.classList.remove("fade-out-animation"),setTimeout((function(){switch(e){case 1:default:changeVisibility(["indexArea"]),visiblesearchBox();break;case 2:changeVisibility(["resultsArea"]),console.log(document.getElementById("SearchBar1")),invisiblesearchBox();break;case 3:changeVisibility(["recipeArea"]),visiblesearchBox();break;case 4:changeVisibility(["ingredientsArea"]),visiblesearchBox();break;case 5:changeVisibility(["aboutUSArea"]),visiblesearchBox()}preloader.classList.add("fade-out-animation")}),300)}activeSection(1),window.addEventListener("load",(function(){preloader.classList.add("fade-out-animation")})),document.getElementById("indexMenu").addEventListener("click",(()=>{activeSection(1)})),document.getElementById("aboutMenu").addEventListener("click",(()=>{activeSection(5)})),document.getElementById("searchMenu").addEventListener("click",(()=>{activeSection(2)})),document.getElementById("SearchBar1").addEventListener("mousedown",(()=>{activeSection(2)}));